<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CHECK VIP + ADMIN</title>
<style>
body{margin:0;font-family:Arial;background:#020617;color:#e5e7eb}
.container{max-width:1000px;margin:20px auto;display:grid;grid-template-columns:2fr 1fr;gap:20px}
.panel{border:1px solid #1e293b;border-radius:16px;padding:20px}
.title{text-align:center;font-size:20px;font-weight:bold;margin-bottom:16px}
input,button{width:100%;padding:12px;border-radius:10px;border:none}
button{margin-top:10px;background:#0ea5e9;font-weight:bold}
.item{padding:10px 0;border-bottom:1px solid #1e293b}

.admin-row{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #1e293b}
.small{font-size:12px;color:#9ca3af}

/* SWITCH */
.switch{position:relative;width:72px;height:32px;border-radius:999px;transition:.25s}
.switch.admin{cursor:pointer}
.switch.viewer{opacity:.5}
.switch.locked{background:#facc15}
.switch.unlocked{background:#22c55e}
.switch::after{content:"";position:absolute;top:3px;left:3px;width:26px;height:26px;background:#020617;border-radius:50%;transition:.25s}
.switch.unlocked::after{transform:translateX(40px)}
@keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-2px)}50%{transform:translateX(2px)}100%{transform:translateX(0)}}
.switch.shake{animation:shake .25s}
</style>
</head>
<body>

<div class="container">
<div class="panel">
  <div class="title">CHECK VIP</div>
  <input id="q" placeholder="Nh·∫≠p m√£">
  <button onclick="check()">CHECK</button>
  <div id="out"></div>
</div>

<div class="panel">
  <div class="title">ADMIN PANEL</div>
  <div id="adminList"></div>
</div>
</div>

<script>
const data=[
 {code:"KM8V8001JM-B813",vip:"VIP 8"},
 {code:"KM8F800JM-B813",vip:"VIP 9"}
];

function normalize(s){return s.toUpperCase().replace(/[^A-Z0-9]/g,"")}
function check(){
 const k=normalize(q.value);
 const r=data.filter(x=>normalize(x.code).includes(k));
 out.innerHTML=r.length?r.map(x=>`<div class='item'>${x.code} - ${x.vip}</div>`).join(""):"‚ùå Kh√¥ng t√¨m th·∫•y";
}

/* ADMIN */
const KEY="admin_state";
let admins=JSON.parse(localStorage.getItem(KEY))||[
{name:"Th·ª£ A",key:"A",lock:false,count:0,last:null},
{name:"Th·ª£ B",key:"B",lock:true,count:0,last:null}
];

const p=new URLSearchParams(location.search);
const u=p.get("u");
const isAdmin=u==="ADMIN";

function save(){localStorage.setItem(KEY,JSON.stringify(admins))}

if(u && !isAdmin){
 const a=admins.find(x=>x.key===u);
 if(a){
  a.count++;
  a.last=new Date().toLocaleString("vi-VN");
  save();
  if(a.lock){
   document.body.innerHTML="<h2 style='text-align:center;color:#facc15;margin-top:120px'>üîí T√ÄI KHO·∫¢N ƒê√É B·ªä KH√ìA</h2>";
  }
 }
}

function renderAdmins(){
 adminList.innerHTML=admins.map((a,i)=>`
  <div class="admin-row">
   <div>
    <b>${a.name}</b>
    <div class="small">üëÅ ${a.count} l·∫ßn</div>
    ${a.last?`<div class="small">üïí ${a.last}</div>`:""}
   </div>
   <div class="switch ${a.lock?"locked":"unlocked"} ${isAdmin?"admin":"viewer"}"
        ${isAdmin?`onclick="toggle(${i},this)"`:""}></div>
  </div>
 `).join("");
}

function toggle(i,el){
 admins[i].lock=!admins[i].lock;
 save();
 el.classList.remove("shake");void el.offsetWidth;el.classList.add("shake");
 renderAdmins();
}

renderAdmins();
</script>
</body>
</html>
