<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CHECK VIP – ADMIN PRO (TEST)</title>
<style>
body{margin:0;font-family:Arial;background:#020617;color:#e5e7eb}
.container{max-width:95vw;margin:16px auto;display:grid;grid-template-columns:2.3fr 1fr;gap:16px}
.panel{background:#020617;border:1px solid #1e293b;border-radius:16px;padding:16px}
.title{display:flex;justify-content:space-between;align-items:center;font-size:18px;font-weight:bold;margin-bottom:10px}
input,button{width:100%;padding:12px;border-radius:10px;border:none}
button{background:#0ea5e9;color:#000;font-weight:bold}
#out{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
.item{border:1px solid #1e293b;border-radius:12px;padding:10px}
.vip{font-weight:bold}
.vip-8{color:#f59e0b}
.vip-9{color:#ef4444}
.admin-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #1e293b}
.lock-icon{width:26px;height:26px;cursor:pointer}
.lock-icon.open{color:#22c55e}
.lock-icon.close{color:#facc15}
.toggle-btn{background:#334155;color:#e5e7eb;font-size:13px;padding:4px 10px;border-radius:999px}
canvas{width:100%;background:#020617;border:1px solid #1e293b;border-radius:12px;margin-top:10px}
</style>
</head>
<body>

<svg style="display:none">
  <symbol id="icon-lock" viewBox="0 0 24 24">
    <path fill="currentColor" d="M12 1a5 5 0 00-5 5v3H6a2 2 0 00-2 2v9a2 2 0 002 2h12a2 2 0 002-2v-9a2 2 0 00-2-2h-1V6a5 5 0 00-5-5z"/>
  </symbol>
  <symbol id="icon-unlock" viewBox="0 0 24 24">
    <path fill="currentColor" d="M17 8h-1V6a4 4 0 10-8 0h2a2 2 0 114 0v2H6a2 2 0 00-2 2v9a2 2 0 002 2h11a2 2 0 002-2v-9a2 2 0 00-2-2z"/>
  </symbol>
</svg>

<div class="container">
  <div class="panel">
    <div class="title">CHECK VIP</div>
    <input id="q" placeholder="Nhập mã">
    <button onclick="check()">CHECK</button>
    <div id="out"></div>
  </div>

  <div class="panel">
    <div class="title">
      <span>ADMIN</span>
      <button class="toggle-btn" onclick="toggleAdmin()">⬆️</button>
    </div>
    <div id="adminBody">
      <div id="adminList"></div>
      <canvas id="chartToday" height="120"></canvas>
      <canvas id="chartWeek" height="120"></canvas>
    </div>
  </div>
</div>

<script src="data.js"></script>
<script>
const admins=["A","B","C"];
let locks=JSON.parse(localStorage.getItem("locks")||"{}");

function normalize(s){return s.toUpperCase().replace(/[^A-Z0-9]/g,"")}

function check(){
 const key=normalize(q.value);
 out.innerHTML="";
 const res=data.filter(x=>normalize(x.code).includes(key));
 if(!res.length){out.innerHTML="<div class='item'>❌ Không có</div>";return;}
 res.forEach(x=>{
   out.innerHTML+=`<div class="item"><div>${x.code}</div><div class="vip vip-${x.vip.match(/\d+/)[0]}">${x.vip}</div></div>`;
 });
}

function renderAdmins(){
 adminList.innerHTML=admins.map(k=>{
   const open=locks[k]!==false;
   return `<div class="admin-row">
     <span>Thợ ${k}</span>
     <svg class="lock-icon ${open?'open':'close'}" onclick="toggleLock('${k}')">
       <use href="#${open?'icon-unlock':'icon-lock'}"></use>
     </svg>
   </div>`;
 }).join("");
}

function toggleLock(k){
 locks[k]=!(locks[k]!==false);
 localStorage.setItem("locks",JSON.stringify(locks));
 renderAdmins();
}

function toggleAdmin(){
 adminBody.style.display=adminBody.style.display==="none"?"block":"none";
}

renderAdmins();
</script>

</body>
</html>
